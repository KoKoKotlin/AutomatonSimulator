digraph {
Artikel Bearbeiten Verlauf Diskussion Abonnieren
Matrix synapse
Dieser Artikel wurde fÃ¼r die folgenden Ubuntu-Versionen getestet:
Ubuntu 20.04 Focal Fossa

Du mÃ¶chtest den Artikel fÃ¼r eine weitere Ubuntu-Version testen? Mitarbeit im Wiki ist immer willkommen! Dazu sind die Hinweise zum Testen von Artikeln zu beachten.

Zum VerstÃ¤ndnis dieses Artikels sind folgende Seiten hilfreich:
Installation von Programmen

Ein Terminal Ã¶ffnen

mit Root-Rechten arbeiten

Virtual Hosts erstellen

Let-s-Encrypt Zertifkate erstellen:

Inhaltsverzeichnis
Installation
Clients
Benutzerverwaltung
HTTPS
Links
ï¿¼Matrix Synapse ðŸ‡¬ðŸ‡§ ist ein dezentraler Messenger-Server, fÃ¼r den es fÃ¼r alle gÃ¤ngigen Plattformen Client-Programme gibt . Er unterstÃ¼tzt neben Ende-zu-Ende verschlÃ¼sselten Chat auch Voice-over-IP und steht unter der GPL-kompatiblen Apache-Lizenz.

Nachrichten werden Ã¼ber die Servergrenzen hinaus nach dem einfachen Schema @Kontakt:matrix.domain.eu versendet.

Installation
Matrix Synapse kann direkt aus den Quellen installiert werden [1]

matrix-synapse (universe)

Befehl zum Installieren der Pakete:

sudo apt-get install matrix-synapse
Oder mit apturl installieren, Link: apt://matrix-synapse

Allerdings erhÃ¤lt man dort nicht unbedingt die aktuelleste Version.

Aktuelle Version
Matrix Synapse betreibt ein eigene Paketquelle fÃ¼r die aktuellste Version. Diese fÃ¼gt man wie folgend hinzu:

Um aus der Fremdquelle zu installieren, muss man unabhÃ¤ngig von der Ubuntu-Version die folgende Paketquelle freischalten:

Hinweis!
ZusÃ¤tzliche Fremdquellen kÃ¶nnen das System gefÃ¤hrden.

deb https://matrix.org/packages/debian/
Um die Fremdquelle zu authentifizieren, muss man den SignierungsschlÃ¼ssel herunterladen â®· und in der Paketverwaltung hinzufÃ¼gen. Alternativ dazu kann man auch im Terminal den folgenden Befehl ausfÃ¼hren:

wget -q -O "-" https://matrix.org/packages/debian/repo-key.asc | sudo apt-key add -
Dienst starten und stoppen
Zum Starten:

sudo service matrix-synapse start
Und zum Stoppen:

sudo service matrix-synapse stop
Clients
Durch die offene Matrix-API gibt es einen ganze Reihe von Matrix-Clients. Eine Ãœbersicht ist auf der Matrix-Webseite ðŸ‡¬ðŸ‡§ zu finden. Der meist benutzte OpenSource-Client ist Riot ðŸ‡¬ðŸ‡§. FÃ¼r Ubuntu Touch kann FluffyChat eingesetzt werden.

Benutzerverwaltung
Damit neue Benutzer hinzugefÃ¼gt werden kÃ¶nnen, muss in der Konfigurationsdatei eine zufÃ¤llig erstellte Zeichenkette hinterlegt werden.

Die Zeichenkette erzeugen:

cat /dev/random | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1
Diese wird in der /etc/matrix-synapse/homeserver.yaml eingetragen:

registration_shared_secret: "hier die Ausgabe eintragen"
Benutzer im Terminal anlegen
Benutzer werden im Terminal mit folgenden Befehlt erzeugt:

register_new_matrix_user -c /etc/matrix-synapse/homeserver.yaml https://127.0.0.1:8448
Administratoren mÃ¼ssen Ã¼ber das Terminal erzeugt werden.

Benutzer im Client anlegen
Wenn im Client - wie Riot - neue Benutzer sich beim Matrix-Server registrieren kÃ¶nnen sollen, muss dies Ã¼ber die /etc/matrix-synapse/homeserver.yaml erlaubt werden. Dazu wird enable_registration von False auf True geÃ¤ndert.
	rankdir=LR
	__start0__ [shape = point];
	3 [shape=doublecircle]
	node [shape = circle];
	__start0__ -> 0
	0 -> 1 [label = " a"]
	0 -> âˆ… [label = " b"]
	0 -> âˆ… [label = " c"]
	1 -> âˆ… [label = " a"]
	1 -> 2 [label = " b"]
	1 -> âˆ… [label = " c"]
	2 -> âˆ… [label = " a"]
	2 -> âˆ… [label = " b"]
	2 -> 3 [label = " c"]
	3 -> âˆ… [label = " a"]
	3 -> âˆ… [label = " b"]
	3 -> âˆ… [label = " c"]
	âˆ… -> âˆ… [label = " a"]
	âˆ… -> âˆ… [label = " b"]
	âˆ… -> âˆ… [label = " c"]
}
